(()=>{"use strict";var e,t={598:(e,t,n)=>{n(728);class i extends Phaser.GameObjects.Text{constructor(e){super(e,10,10,"",{color:"black",fontSize:"28px"}),e.add.existing(this),this.setOrigin(0)}update(){this.setText(`fps: ${Math.floor(this.scene.game.loop.actualFps)}`)}}var s=n(844);var o=n(292),r=n.n(o);function a(e){return r()(`game:${e}`)}r().enable("*");class l extends Phaser.GameObjects.Image{constructor(e,t,n){super(e,t,n,"body.blue.1"),e.add.existing(this),this.setDepth(100)}}const c=a("client"),d=a("input");class h extends Phaser.Scene{constructor(){super({key:"GameScene"})}create(){return e=this,t=void 0,o=function*(){this.cameras.main.centerOn(0,0),this.fpsText=new i(this),this.add.text(this.cameras.main.width-15,15,`Phaser v${Phaser.VERSION}`,{color:"#000000",fontSize:"24px"}).setOrigin(1,0),function(e,t){const{up:n,down:i,left:s,right:o}=e.input.keyboard.createCursorKeys();let r={up:!1,down:!1,left:!1,right:!1};e.events.on("update",(()=>{const e={up:n.isDown,down:i.isDown,left:s.isDown,right:o.isDown};e.left===r.left&&e.right===r.right&&e.down===r.down&&e.up===r.up||(r=e,t.send("direction",e),d("sent new direction %j",e))}))}(this,yield function(e){return t=this,n=void 0,o=function*(){let t="ws://zshwx1.colyseus.de";c("connecting to server url %s",t);const n=new s.Client(t),i=yield n.joinOrCreate("gameRoom");let o;c(i.sessionId,"joined",i.id,i.name),i.onStateChange((e=>{})),i.onMessage("message",(e=>{})),i.state.listen("tileMap",(t=>{t.mapSize.onChange=()=>{o&&o.destroy(),o=e.add.rectangle(0,0,i.state.tileMap.mapSize.width*t.tileSize,i.state.tileMap.mapSize.height*t.tileSize,13421772),o.setDepth(-1)}})),i.state.players.onAdd=e=>{c("added new player with id",e.id),e.onChange=e=>{e.forEach((e=>{c(e.field),c(e.value),c(e.previousValue)}))},e.onRemove=()=>{c("player",e.id,"removed")},e.triggerAll()};const r=new Map;return i.state.bodies.onAdd=t=>{c("added new body with id",t.id);const n=new l(e,200,200);let i,s;r.set(t,n),t.position.listen("x",(e=>n.setX(e))),t.position.listen("y",(e=>n.setY(e))),t.moveDirection.onChange=()=>{0===t.moveDirection.x&&0===t.moveDirection.y||(c("setting rotation %j",t.moveDirection),n.setRotation(new Phaser.Math.Vector2(t.moveDirection).angle()))},t.onRemove=()=>{c("player",t.id,"removed");const e=r.get(t);null==e||e.destroy(),r.delete(t)},t.listen("isCatcher",(t=>{t?(i&&s||(s=e.add.particles("particle.red"),i=s.createEmitter({})),i.setScale(.3),i.setSpeed(30),i.setLifespan(100),i.setBlendMode(Phaser.BlendModes.ADD),i.startFollow(n),s.setDepth(90)):s&&(c("destroying particles"),s.destroy(),s=void 0,i=void 0)})),t.triggerAll()},i.state.listen("tileMap",(e=>e.listen("tiles",(e=>{e.onAdd=(e,t)=>{c("new tile %s",t)}})))),i},new((i=void 0)||(i=Promise))((function(e,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}l((o=o.apply(t,n||[])).next())}));var t,n,i,o}(this))},new((n=void 0)||(n=Promise))((function(i,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o}update(){this.fpsText.update()}}class p extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image("body.blue.1","assets/sprites/body.blue.1.png"),this.load.image("tile.wall.1","assets/sprites/tile.wall.png"),this.load.image("particle.red","assets/particles/red.png")}create(){this.scene.start("GameScene")}}const u={type:Phaser.AUTO,backgroundColor:"#333333",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:720},scene:[p,h]};window.addEventListener("load",(()=>{new Phaser.Game(u)}))}},n={};function i(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,n,s,o)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,s,o]=e[d],a=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,s,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var s,o,[r,a,l]=n,c=0;if(r.some((t=>0!==e[t]))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(l)var d=l(i)}for(t&&t(n);c<r.length;c++)o=r[c],i.o(e,o)&&e[o]&&e[o][0](),e[r[c]]=0;return i.O(d)},n=self.webpackChunk_catchme4_client=self.webpackChunk_catchme4_client||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=i.O(void 0,[216],(()=>i(598)));s=i.O(s)})();