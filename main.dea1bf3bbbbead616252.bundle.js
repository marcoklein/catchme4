(()=>{"use strict";var e,t={681:(e,t,n)=>{n(728);class i extends Phaser.GameObjects.Text{constructor(e){super(e,10,10,"",{color:"black",fontSize:"28px"}),e.add.existing(this),this.setOrigin(0)}update(){this.setText(`fps: ${Math.floor(this.scene.game.loop.actualFps)}`)}}var s=n(844);var o=n(292),r=n.n(o);function a(e){return r()(`game:${e}`)}r().enable("*");class c extends Phaser.GameObjects.Image{constructor(e,t,n,i){super(e,t,n,i),e.add.existing(this),this.setDepth(20)}}class l extends Phaser.GameObjects.Image{constructor(e,t,n){super(e,t,n,"body.blue.1"),e.add.existing(this),this.setDepth(100)}}const d=a("client:body-synchronizer");const h=a("client");function p(e){return t=this,n=void 0,o=function*(){let t="wss://zshwx1.colyseus.de";/localhost/.test(window.location.host)&&(t="ws://localhost:2567"),h("connecting to server url %s",t);const n=new s.Client(t),i=yield n.joinOrCreate("gameRoom");let o;h(i.sessionId,"joined",i.id,i.name),i.onStateChange((e=>{})),i.onMessage("message",(e=>{})),i.state.listen("tileMap",(t=>{t.mapSize.onChange=()=>{o&&o.destroy(),o=e.add.rectangle(0,0,i.state.tileMap.mapSize.width*t.tileSize,i.state.tileMap.mapSize.height*t.tileSize,13421772),o.setDepth(-1)}})),i.state.players.onAdd=e=>{h("added new player with id",e.id),e.onChange=e=>{e.forEach((e=>{h(e.field),h(e.value),h(e.previousValue)}))},e.onRemove=()=>{h("player",e.id,"removed")},e.triggerAll()},i.state.bodies.onAdd=t=>function(e,t){d("added new body with id",t.id);const n=new l(e,200,200);let i,s;t.position.listen("x",(e=>n.setX(e))),t.position.listen("y",(e=>n.setY(e))),t.moveDirection.onChange=()=>{0===t.moveDirection.x&&0===t.moveDirection.y||(d("setting rotation %j",t.moveDirection),n.setRotation(new Phaser.Math.Vector2(t.moveDirection).angle()))};const o=()=>{s&&(d("destroying particles"),s.destroy(),s=void 0,i=void 0)};t.onRemove=()=>{d("player",t.id,"removed"),n.destroy(),o()},t.listen("isCatcher",(t=>{t?(i&&s||(s=e.add.particles("particle.red"),i=s.createEmitter({})),i.setScale(.3),i.setSpeed(30),i.setLifespan(100),i.setBlendMode(Phaser.BlendModes.ADD),i.startFollow(n),s.setDepth(90)):s&&o()})),t.triggerAll()}(e,t);const r=e.add.group();return i.state.listen("tileMap",(t=>{const n=-t.mapSize.width*t.tileSize*.5,i=-t.mapSize.height*t.tileSize*.5;t.listen("tiles",(s=>{s.onAdd=(s,o)=>{const a=new c(e,n+s.position.x*t.tileSize,i+s.position.y*t.tileSize,"tile.wall.1");a.setOrigin(0,0),r.add(a),h("new tile %s",o),s.onRemove=()=>{r.remove(a,!0,!0),h("removed tile %s",o)}}}))})),i},new((i=void 0)||(i=Promise))((function(e,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}c((o=o.apply(t,n||[])).next())}));var t,n,i,o}const u=a("input");class f extends Phaser.Scene{constructor(){super({key:"GameScene"})}create(){return e=this,t=void 0,s=function*(){this.cameras.main.centerOn(0,0),this.fpsText=new i(this),this.add.text(this.cameras.main.width-15,15,`Phaser v${Phaser.VERSION}`,{color:"#000000",fontSize:"24px"}).setOrigin(1,0),function(e,t){const{up:n,down:i,left:s,right:o}=e.input.keyboard.createCursorKeys();let r={up:!1,down:!1,left:!1,right:!1};e.events.on("update",(()=>{const e={up:n.isDown,down:i.isDown,left:s.isDown,right:o.isDown};e.left===r.left&&e.right===r.right&&e.down===r.down&&e.up===r.up||(r=e,t.send("direction",e),u("sent new direction %j",e))}))}(this,yield p(this))},new((n=void 0)||(n=Promise))((function(i,o){function r(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((s=s.apply(e,t||[])).next())}));var e,t,n,s}update(){this.fpsText.update()}}class v extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image("body.blue.1","assets/sprites/body.blue.1.png"),this.load.image("tile.wall.1","assets/sprites/tile.wall.png"),this.load.image("particle.red","assets/particles/red.png")}create(){this.scene.start("GameScene")}}const g={type:Phaser.AUTO,backgroundColor:"#333333",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:720},scene:[v,f]};window.addEventListener("load",(()=>{new Phaser.Game(g)}))}},n={};function i(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,n,s,o)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,s,o]=e[d],a=!0,c=0;c<n.length;c++)(!1&o||r>=o)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(a=!1,o<r&&(r=o));if(a){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,s,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var s,o,[r,a,c]=n,l=0;if(r.some((t=>0!==e[t]))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(c)var d=c(i)}for(t&&t(n);l<r.length;l++)o=r[l],i.o(e,o)&&e[o]&&e[o][0](),e[r[l]]=0;return i.O(d)},n=self.webpackChunk_catchme4_client=self.webpackChunk_catchme4_client||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=i.O(void 0,[216],(()=>i(681)));s=i.O(s)})();